<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Project Submissions</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #111;
      color: #eee;
      padding: 2rem;
    }
    .projects {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
    }
    .project {
      background: #222;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 0 10px #000;
    }
    .project img {
      width: 100%;
      border-radius: 6px;
    }
    .project h2 {
      margin: 0.5rem 0 0;
    }
    .project p {
      font-size: 0.9rem;
    }
    .project a {
      color: #66f;
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <h1>Submission Gallery</h1>
  <div class="projects" id="projects"></div>

  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script>
    async function loadProject(folder) {
      try {
        const infoRes = await fetch(`${folder}/info.yml`);
        if (!infoRes.ok) throw new Error("Missing info.yml");

        const infoText = await infoRes.text();
        const data = jsyaml.load(infoText);
        data.image = `${folder}/image.png`;
        return data;
      } catch (err) {
        console.error(`Failed to load ${folder}:`, err);
        return null;
      }
    }

    async function displayProjects() {
      const folder = 'test_submission';
      const container = document.getElementById('projects');

      const project = await loadProject(folder);
      if (!project) return;

      const card = document.createElement('div');
      card.className = 'project';
      card.innerHTML = `
        <img src="${project.image}" alt="${project.name}" />
        <h2>${project.name}</h2>
        <p>${project.description}</p>
        <a href="${project.github}" target="_blank">GitHub</a>
        <a href="${project.demo}" target="_blank">Demo</a>
      `;
      container.appendChild(card);
    }

    displayProjects();
  </script>
</body>
</html>
